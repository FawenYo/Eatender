{"version":3,"sources":["components/useForm.js","components/controls/Controls.js","components/controls/Input.js","components/VoteCreate.js","index.js"],"names":["useForm","initialFValues","validateOnChange","validate","useState","values","setValues","errors","setErrors","handleInputChange","e","target","name","value","resetForm","useStyles","makeStyles","theme","root","width","margin","spacing","Form","props","classes","other","children","className","autoComplete","Controls","Input","inputBox","label","onChange","error","TextField","variant","helperText","AppContainer","styled","div","BoxContainer","TopContainer","AppBarContainer","HeaderContainer","BannerText","h2","HeaderText","SmallText","h5","BackDrop","motion","pageContent","padding","appBar","position","layout","marginLeft","marginRight","breakpoints","up","paper","marginTop","marginBottom","stepper","color","buttons","display","alignItems","justifyContent","button","todayDate","Date","defaultDueDate","year","getFullYear","month","getMonth","day","getDate","PreservedFormValues","voteName","dueDate","dueTime","selectedTime","dateRange","timeSession","MultiDateSelect","setDateRange","shouldHighlightWeekends","minimumDate","utils","getToday","HeaderText_timeSelect","TimeSessionSelect","handleOnClick","includes","pop","push","type","id","onClick","for","VoteName_DueDate","fieldValues","temp","invalidCharacters","some","invalidChar","Object","every","x","setDueDate","setSelectedTime","String","match","parseTimeTo24h","DateFnsUtils","KeyboardButtonProps","getStepContent","step","Error","steps","VoteCreate","React","activeStep","setActiveStep","initial","Stepper","map","Step","StepLabel","Fragment","length","Button","validation","Swal","fire","icon","title","text","confirmButtonText","user_id","query_url","URL","window","location","href","searchParams","has","URLSearchParams","get","postedData","requestOptions","method","header","body","JSON","stringify","mode","fetch","then","response","json","data","status","message","content","result","replace","share_link","error_message","catch","handleSubmit","render","textAlign","document","querySelector"],"mappings":"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","file":"static/js/main.2c3f56c0.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { makeStyles } from \"@material-ui/core\";\n\nexport function useForm(initialFValues, validateOnChange = false, validate) {\n\n\n    const [values, setValues] = useState(initialFValues);\n    const [errors, setErrors] = useState({});\n\n    const handleInputChange = e => {\n        const { name, value } = e.target\n        setValues({\n            ...values,\n            [name]: value\n        })\n        if (validateOnChange)\n            validate({ [name]: value })\n    }\n\n    const resetForm = () => {\n        setValues(initialFValues);\n        setErrors({})\n    }\n\n\n    return {\n        values,\n        setValues,\n        errors,\n        setErrors,\n        handleInputChange,\n        resetForm,\n    }\n}\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        '& .MuiFormControl-root': {\n            width: '80%',\n            margin: theme.spacing(1)\n        }\n    }\n}))\n\nexport function Form(props) {\n\n    const classes = useStyles();\n    const { children, ...other } = props;\n    return (\n        <form className={classes.root} autoComplete=\"off\" {...other}>\n            {props.children}\n        </form>\n    )\n}\n\n","import Input from \"./Input\";\n\nconst Controls = {\n    Input,\n    // TODO\n}\n\nexport default Controls;\n","import React from 'react'\nimport { TextField } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport default function Input(props) {\n\n    const useStyles = makeStyles(theme => ({\n        inputBox: {\n            width: \"95% !important\",\n        },\n    }));\n    const classes = useStyles();\n    const { name, label, value, onChange, error = null } = props;\n    return (\n        <TextField\n            className={classes.inputBox}\n            variant=\"outlined\"\n            name={name}\n            label={label}\n            value={value}\n            onChange={onChange}\n            // required\n            {...(error && { error: true, helperText: error })}\n        />\n    )\n}\n","import React, { useState } from 'react'\nimport styled from \"styled-components\";\nimport { motion } from \"framer-motion\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Step, Stepper, StepLabel, Button } from \"@material-ui/core\"\nimport { useForm, Form } from \"./useForm\";\n\n// ./ imports\nimport Controls from \"./controls/Controls\";\n\n// To be improved\nimport 'react-modern-calendar-datepicker/lib/DatePicker.css';\nimport { Calendar, utils } from 'react-modern-calendar-datepicker';\nimport Swal from 'sweetalert2';\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n} from '@material-ui/pickers';\n\nconst AppContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst BoxContainer = styled.div`\n  width: 330px;\n  min-height: 550px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 19px;\n  background-color: #fff;\n  box-shadow: 0 0 2px rgba(15, 15, 15, 0.28);\n  position: relative;\n  overflow: hidden;\n`;\n\nconst TopContainer = styled.div`\n  width: 100%;\n  height: 185px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  padding: 0 1.8em;\n  padding-bottom: 5em;\n`;\n\nconst AppBarContainer = styled.div`\n  width: 100%;\n  height: 65px;\n  display: flex;\n  justify-content: flex-end;\n  padding: 1 0em;\n`;\n\nconst HeaderContainer = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst BannerText = styled.h2`\n  font-size: 40px;\n  font-weight: 600;\n  line-height: 1.25;\n  color: #fff;\n  z-index: 10;\n  margin: 0;\n`;\n\nconst HeaderText = styled.h2`\n  font-size: 30px;\n  font-weight: 600;\n  line-height: 1.25;\n  color: #fff;\n  z-index: 10;\n  margin: 0;\n`;\n\nconst SmallText = styled.h5`\n  color: #c24510;\n  font-weight: 1000 !important;\n  font-size: 13px;\n  z-index: 10;\n  margin: 0;\n  margin-top: 7px;\n`;\n\nconst BackDrop = styled(motion.div)`\n  width: 140%;\n  height: 550px;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  border-radius: 50%;\n  transform: rotate(60deg);\n  top: -290px;\n  left: -70px;\n  background: rgb(241, 196, 15);\n  background: linear-gradient(\n    58deg,\n    rgba(250, 215, 87, 1) 20%,\n    rgba(243, 172, 18, 1) 100%\n  );\n`;\n\nconst useStyles = makeStyles(theme => ({\n  pageContent: {\n    margin: theme.spacing(5),\n    padding: theme.spacing(3),\n  },\n  appBar: {\n    position: 'relative',\n  },\n  layout: {\n    width: 'auto',\n    marginLeft: theme.spacing(2),\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\n      width: 600,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n    padding: theme.spacing(2),\n    [theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\n      marginTop: theme.spacing(6),\n      marginBottom: theme.spacing(6),\n      padding: theme.spacing(3),\n    },\n  },\n  stepper: {\n    padding: theme.spacing(3, 0, 5),\n    color: \"rgba(241, 196, 15, 0.8)\"\n  },\n  buttons: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  button: {\n    marginTop: theme.spacing(3),\n    width: 200,\n  },\n}));\n\nconst todayDate = new Date();\n\nvar defaultDueDate = {\n  year: todayDate.getFullYear(),\n  month: todayDate.getMonth() + 1,\n  day: todayDate.getDate()\n}\n\n/* Parts to improve */\nvar PreservedFormValues = {\n  voteName: '',\n  dueDate: '',\n  dueTime: '',\n  selectedTime: null,\n  dateRange: [],\n  timeSession: [],\n}\n\nvar today = new Date();\n\n/* DateSelect */\nfunction MultiDateSelect() {\n  const [dateRange, setDateRange] = useState(PreservedFormValues.dateRange);\n\n  const HeaderText = styled.h2`\n    font-size: 24px;\n    font-weight: 600 !important;\n    line-height: 1;\n    color: #000;\n    z-index: 10;\n    margin: 10;\n  `;\n\n  const updateToPreserved = () => {\n    PreservedFormValues.dateRange = dateRange;\n  }\n  updateToPreserved();\n\n  return (\n    <>\n      <Form>\n        <center>\n          <HeaderText>\n            選擇聚餐日期\n            </HeaderText>\n          <Calendar\n            name=\"dateRange\"\n            value={dateRange}\n            onChange={setDateRange}\n            shouldHighlightWeekends\n            minimumDate={utils().getToday()}\n          />\n        </center>\n      </Form>\n    </>\n  )\n}\n\n/* END OF DateSelect PART */\n\n/* TimeSessioin Part */\nconst HeaderText_timeSelect = styled.h2`\n    font-size: 24px;\n    font-weight: 600 !important;\n    line-height: 1;\n    color: #000;\n    z-index: 10;\n    margin: 10;\n`;\n\nfunction TimeSessionSelect() {\n\n  const handleOnClick = (e) => {\n    const value = e.target.value;\n    if (PreservedFormValues.timeSession.includes(value)) {\n      PreservedFormValues.timeSession.pop(value);\n    }\n    else {\n      PreservedFormValues.timeSession.push(value);\n    }\n  }\n\n  return (\n    <>\n      <center>\n        <HeaderText_timeSelect>選擇聚餐時段</HeaderText_timeSelect>\n        <input type=\"checkbox\" id=\"breakfast\" value=\"早餐\" onClick={handleOnClick} />\n        <label for=\"breakfast\">早餐</label>\n        <input type=\"checkbox\" id=\"lunch\" value=\"午餐\" onClick={handleOnClick} />\n        <label for=\"lunch\">午餐</label>\n        <input type=\"checkbox\" id=\"teatime\" value=\"下午茶\" onClick={handleOnClick} />\n        <label for=\"teatime\">下午茶</label>\n        <input type=\"checkbox\" id=\"dinner\" value=\"晚餐\" onClick={handleOnClick} />\n        <label for=\"dinner\">晚餐</label>\n        <input type=\"checkbox\" id=\"supper\" value=\"宵夜\" onClick={handleOnClick} />\n        <label for=\"supper\">宵夜</label>\n      </center>\n    </>\n  );\n}\n\n/* END OF TimeSessioin Part */\n\nfunction VoteName_DueDate() {\n  /* Error report */\n  const validate = (fieldValues = values) => {\n    let temp = { ...errors }\n    if ('voteName' in fieldValues) {\n      const invalidCharacters = [\"$\", \"@\", \"+\", \"＋\"];\n      if (!fieldValues.voteName) {\n        temp.voteName = \"請輸入投票名稱\";\n      }\n      else if (invalidCharacters.some(invalidChar => fieldValues.voteName.includes(invalidChar))) {\n        temp.voteName = \"投票名稱不得含有'$', '@', '+'等非法字元\";\n      }\n      else {\n        temp.voteName = \"\";\n      }\n    }\n    setErrors({\n      ...temp\n    })\n    if (fieldValues == values)\n      return Object.values(temp).every(x => x == \"\")\n  }\n\n  const {\n    values,\n    setValues,\n    errors,\n    setErrors,\n    handleInputChange,\n    resetForm,\n  } = useForm(PreservedFormValues, true, validate);\n\n  const HeaderText = styled.h2`\n      font-size: 24px;\n      font-weight: 600 !important;\n      line-height: 1;\n      color: #000;\n      z-index: 10;\n      margin: 10;\n  `;\n\n  /* Parts to improve */\n\n  const [dueDate, setDueDate] = useState(defaultDueDate);\n\n\n  const [selectedTime, setSelectedTime] = useState(PreservedFormValues.selectedTime);\n\n  const parseTimeTo24h = () => {\n    if (selectedTime) {\n      PreservedFormValues.selectedTime = selectedTime;\n      const temp = String(selectedTime);\n      const re = /\\d\\d:\\d\\d/g;\n      PreservedFormValues.dueTime = temp.match(re);\n    }\n  }\n  const syncDueDateToPreserved = () => {\n    parseTimeTo24h();\n    if (dueDate && selectedTime && values.voteName) {\n      PreservedFormValues.dueDate = `${dueDate.year}/${dueDate.month}/${dueDate.day} ${PreservedFormValues.dueTime}:00`;\n      PreservedFormValues.voteName = values.voteName;\n\n      defaultDueDate.year = dueDate.year\n      defaultDueDate.month = dueDate.month\n      defaultDueDate.day = dueDate.day\n    }\n  }\n  syncDueDateToPreserved();\n  PreservedFormValues.voteName = values.voteName ? values.voteName : \"\";\n\n  /* END OF TODO PART */\n\n  return (\n    <Form>\n      <center>\n        <HeaderText>\n          輸入聚餐名稱\n        </HeaderText>\n      </center>\n      <Controls.Input\n        name=\"voteName\"\n        label=\"聚餐名稱\"\n        value={values.voteName}\n        onChange={handleInputChange}\n        error={errors.voteName}\n      />\n      <center>\n        <HeaderText>\n          投票截止日期＆時間\n        </HeaderText>\n        <Calendar\n          name=\"dueDate\"\n          value={dueDate}\n          onChange={setDueDate}\n          shouldHighlightWeekends\n          minimumDate={utils().getToday()}\n        />\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <KeyboardTimePicker\n            margin=\"normal\"\n            id=\"time-picker\"\n            label=\"投票截止時間\"\n            value={selectedTime}\n            onChange={setSelectedTime}\n            KeyboardButtonProps={{\n              'aria-label': 'change time',\n            }}\n          />\n        </MuiPickersUtilsProvider>\n      </center>\n    </Form>\n  )\n}\n\n/* Control each steps content */\nfunction getStepContent(step) {\n  switch (step) {\n    case 0:\n      return <VoteName_DueDate />;\n    case 1:\n      return <MultiDateSelect />;\n    case 2:\n      return <TimeSessionSelect />;\n    default:\n      throw new Error('Unknown step');\n  }\n}\n\nconst steps = [`聚餐名稱＆截止日期`, `聚餐日期選擇`, '聚餐時段選擇'];\n\nexport default function VoteCreate() {\n\n  const {\n    values,\n    setValues,\n    errors,\n    setErrors,\n    handleInputChange,\n    resetForm,\n  } = useForm(PreservedFormValues, true)\n  /* Submit Part */\n\n  const [activeStep, setActiveStep] = React.useState(0);\n\n  const classes = useStyles();\n\n  /* SUBMIT */\n  const handleSubmit = e => {\n    let user_id;\n    const query_url = new URL(window.location.href)\n    if (query_url.searchParams.has(\"liff.state\")) {\n      const query_params = new URLSearchParams(query_url.searchParams.get(\"liff.state\"))\n      user_id = query_params.get(\"user_id\")\n    } else {\n      user_id = query_url.searchParams.get(\"user_id\")\n    }\n    const postedData = {\n      \"user_id\": user_id,\n      'vote_name': PreservedFormValues.voteName,\n      'due_date': PreservedFormValues.dueDate,\n      'date_range': PreservedFormValues.dateRange,\n      'time_session': PreservedFormValues.timeSession,\n    };\n\n    const requestOptions = {\n      method: 'POST',\n      header: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(postedData),\n      mode: 'cors'\n    };\n    fetch('../api/vote/create/event', requestOptions)\n      .then(response => response.json())\n      .then((data) => {\n        if (data && data.status === \"success\") {\n          Swal.fire({\n            icon: \"success\",\n            title: data.message.title,\n            text: data.message.content,\n            confirmButtonText: \"確認\",\n          }).then((result) => {\n            window.location.replace(data.message.share_link);\n          });\n        } else {\n          Swal.fire({\n            icon: \"error\",\n            title: \"很抱歉！\",\n            text: data.error_message,\n            confirmButtonText: \"確認\",\n          });\n        }\n      })\n      .catch((error) => {\n        Swal.fire({\n          icon: \"error\",\n          title: \"很抱歉！\",\n          text: \"無法連接伺服器，請稍後再試\",\n          confirmButtonText: \"確認\",\n        });\n      });\n  }\n\n  const handleNext = () => {\n    if (activeStep == 0) {\n      let validation = true;\n      function checkVoteName() {\n        const invalidCharacters = [\"$\", \"@\", \"+\", \"＋\"];\n        if (PreservedFormValues.voteName) {\n          if (invalidCharacters.some(invalidChar => PreservedFormValues.voteName.includes(invalidChar))) {\n            validation = false;\n            Swal.fire({\n              icon: \"error\",\n              title: \"很抱歉！\",\n              text: \"投票名稱不得含有'$', '@', '+'等非法字元\",\n              confirmButtonText: \"確認\",\n            });\n          }\n        } else {\n          validation = false;\n          Swal.fire({\n            icon: \"error\",\n            title: \"很抱歉！\",\n            text: \"投票名稱不得為空\",\n            confirmButtonText: \"確認\",\n          });\n        }\n      }\n      function checkDueDate() {\n        if (!PreservedFormValues.dueDate) {\n          validation = false;\n          Swal.fire({\n            icon: \"error\",\n            title: \"很抱歉！\",\n            text: \"投票截止日期與時間不得為空\",\n            confirmButtonText: \"確認\",\n          });\n        }\n      }\n      checkVoteName()\n      if (validation) {\n        checkDueDate()\n        if (validation) {\n          setActiveStep(activeStep + 1);\n        }\n      }\n    } else if (activeStep == 1) {\n      let validation = true;\n      if (PreservedFormValues.dateRange.length == 0) {\n        validation = false;\n        Swal.fire({\n          icon: \"error\",\n          title: \"很抱歉！\",\n          text: \"聚餐日期不得為空\",\n          confirmButtonText: \"確認\",\n        });\n      }\n      if (validation) {\n        setActiveStep(activeStep + 1);\n      }\n    }\n    if (activeStep === steps.length - 1) {\n      let validation = true;\n      if (PreservedFormValues.timeSession.length == 0) {\n        validation = false;\n        Swal.fire({\n          icon: \"error\",\n          title: \"很抱歉！\",\n          text: \"選擇聚餐時段不得為空\",\n          confirmButtonText: \"確認\",\n        });\n      }\n      if (validation) {\n        handleSubmit();\n      }\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep(activeStep - 1);\n  };\n\n  return (\n    <AppContainer>\n      <BoxContainer>\n        <TopContainer>\n          <BackDrop\n            initial={false}\n          />\n          <HeaderContainer>\n            <BannerText>EATender</BannerText>\n            <HeaderText>聚餐創立</HeaderText>\n            <SmallText>加LINE約吃飯，感情不會散！</SmallText>\n          </HeaderContainer>\n        </TopContainer>\n        <AppBarContainer>\n          <Stepper activeStep={activeStep} className={classes.stepper}>\n            {steps.map((label) => (\n              <Step key={label}>\n                <StepLabel>{label}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n        </AppBarContainer>\n        <React.Fragment>\n          {activeStep === steps.length ? (\n            <center>\n              <HeaderText_timeSelect>\n                已建立聚餐投票\n                </HeaderText_timeSelect>\n              <HeaderText_timeSelect>\n                預祝 聚餐愉快(*´∀`)~♥\n                </HeaderText_timeSelect>\n            </center>\n          ) : (\n            <React.Fragment>\n              {getStepContent(activeStep)}\n              <div className={classes.buttons}>\n                {activeStep !== 0 && (\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleBack}\n                    className={classes.button}\n                  >\n                    回上一步\n                  </Button>\n                )}\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  id=\"nextStepButton\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  {activeStep === steps.length - 1 ? '建立投票' : `前往${steps[activeStep + 1]}`}\n                </Button>\n              </div>\n            </React.Fragment>\n          )}\n        </React.Fragment>\n      </BoxContainer>\n    </AppContainer>\n  )\n}\n","import React from \"react\"\nimport { render } from \"react-dom\"\nimport VoteCreate from \"./components/VoteCreate\"\n\nconst styles = {\n    fontFamily: \"sans-serif\",\n    textAlign: \"center\",\n}\n\n\nrender(<VoteCreate textAlign=\"center\" />, document.querySelector(\"#form\"))\n"],"sourceRoot":""}